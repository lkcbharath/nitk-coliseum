<%= form_for(response) do |f| %>
  <% if response.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(response.errors.count, "error") %> prohibited this response from being saved:</h2>

      <ul>
      <% response.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <% if question = current_user.questions.first %>

    <h3 >
      <%= f.label question.description, :style => "display: inline-block;" %><p style="display: inline-block;float: right;" id="timer">10</p>  
    </h3>


    <br>

    <div class="field" style="display: none;">
      <%= f.radio_button :given_response, 0, :checked => "checked" %>
    </div>

    <div class="radio">
      <label>
          <%= f.radio_button :given_response, 1 %>
          <%= f.label question.option_1 %><br>
      </label>
    </div>

    

    <div class="radio">
    <label>
        <%= f.radio_button :given_response, 2 %>
        <%= f.label question.option_2 %><br>
    </label>
    </div>

    

    <div class="radio">
      <label>
        <%= f.radio_button :given_response, 3 %>
        <%= f.label question.option_3 %><br>
    </label>
    </div>

    

    <div class="radio">
      <label>
        <%= f.radio_button :given_response, 4 %>
        <%= f.label question.option_4 %><br>
      </label>    
    </div>

    

    <div class = "<%= controller_name %> <%= action_name %>">
        <%= f.submit :id => "response_submit", :class => "btn btn-default" %>
    </div>

    

  <% end %>

  <script>
    document.onload = setTimeout(function () { response_submit.click(); }, 10000);
  </script>

  <script>
    document.getElementById('timer').innerHTML = "00" + ":" + "11";
    startTimer();

    function startTimer() {
      var presentTime = document.getElementById('timer').innerHTML;
      var timeArray = presentTime.split(/[:]+/);
      var m = timeArray[0];
      var s = checkSecond((timeArray[1] - 1));
      if(s==59){m=m-1}
      //if(m<0){alert('timer completed')}
      
      document.getElementById('timer').innerHTML = m + ":" + s;
      setTimeout(startTimer, 1000);
    }

    function checkSecond(sec) {
      if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
      if (sec < 0) {sec = "59"};
      return sec;
    }
  </script>

<% end %>